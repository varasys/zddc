<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Directory File Indexer</title>
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/alpinejs/3.13.3/cdn.min.js"></script>
</head>
<body>
    <div x-data="fileIndexer()" class="container mx-auto p-4">
        <h1 class="text-2xl font-bold mb-4">Directory File Indexer</h1>
        
        <button 
            @click="selectDirectory" 
            class="bg-blue-500 text-white px-4 py-2 rounded mb-4"
        >
            Select Directory
        </button>

        <div x-show="files.length > 0" class="mt-4">
            <h2 class="text-xl font-semibold mb-2">Files in Directory</h2>
            <ul class="list-disc pl-5">
                <template x-for="file in files" :key="file.name">
                    <li class="mb-2">
                        <a 
                            :href="createObjectURL(file)" 
                            target="_blank" 
                            class="text-blue-600 hover:underline"
                            x-text="file.name"
                        ></a>
                    </li>
                </template>
            </ul>
        </div>
    </div>

    <script>
        function fileIndexer() {
            return {
                files: [],
                async selectDirectory() {
                    const dirHandle = await window.showDirectoryPicker();
                    this.files = [];
                    for await (const entry of dirHandle.values()) {
                        if (entry.kind === 'file') {
                            const file = await entry.getFile();
                            this.files.push(file);
                        }
                    }
                },
                createObjectURL(file) {
                    return URL.createObjectURL(file);
                }
            };
        }
    </script>
</body>
</html>